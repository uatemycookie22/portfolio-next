@import "tailwindcss";
@plugin "@tailwindcss/typography";

@variant dark (&:where(.dark, .dark *));

@theme {
  /* Custom breakpoints */
  --breakpoint-sm: 640px;
  --breakpoint-md: 780px;
  --breakpoint-lg: 1150px;

  /* Semantic background colors */
  --color-brand-primary: theme(colors.violet.600);
  --color-brand-secondary: theme(colors.violet.700);
  --color-brand-tertiary: theme(colors.violet.500);
  --color-brand-muted: oklch(0.43 0.1066 294.85);
  --color-neutral-primary: theme(colors.white);
  --color-neutral-secondary: theme(colors.gray.50);

  /* Semantic border colors */
  --color-border-brand-primary: theme(colors.violet.600);
  --color-border-neutral-primary: theme(colors.gray.200);
  --color-border-neutral-secondary: theme(colors.gray.100);

  /* Semantic text colors */
  --color-text-neutral-primary: theme(colors.gray.900);
  --color-text-neutral-secondary: theme(colors.gray.600);
  --color-text-neutral-tertiary: theme(colors.gray.500);

  /* Custom animations */
  --animate-shimmer: shimmer 2s infinite;
  --animate-pulse: pulse 2s infinite;
  --animate-blink: blink 1.5s linear infinite;

  /* Transition properties */
  --transition-size: width, height;
  --transition-position: left, top, height, right;
}

@keyframes shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

@keyframes blink {
  0% { opacity: 0; }
  50% { opacity: 0.7; }
  100% { opacity: 0; }
}

@keyframes shrink-width {
  0% { width: 100%; }
  100% { width: 0%; }
}

/* Custom utility classes */
@utility transform-perspective {
  transform: scale(1.05);
  backface-visibility: hidden;
  filter: blur(0px);
  -webkit-font-smoothing: subpixel-antialiased;
}

@utility link-underline {
  text-decoration: none;
  cursor: pointer;
  background: linear-gradient(90deg, var(--color-brand-tertiary) 50%, theme(colors.violet.300) 50%) no-repeat 100% 100% / 200% 2px;
  transition: background-position .3s, color .6s;
}

@utility link-underline-dark {
  background-image: linear-gradient(90deg, var(--color-brand-tertiary) 50%, var(--color-brand-muted) 50%);
}

@utility link-hover-slide {
  &:hover {
    background-position: 0% 100%;
  }
}

/* Semantic text color utilities */
@utility text-content {
  color: var(--color-text-neutral-primary);
}

@utility text-content-secondary {
  color: var(--color-text-neutral-secondary);
}

@utility text-content-muted {
  color: var(--color-text-neutral-tertiary);
}

@utility text-accent {
  color: var(--color-brand-tertiary);
}

@utility text-accent-hover {
  color: var(--color-brand-tertiary);
}

@utility text-accent-muted {
  color: var(--color-brand-muted);
}

@layer components {
  .link-animated {
    @apply link-underline link-hover-slide text-accent hover:text-accent-hover md:text-content;

    @variant dark {
      @apply link-underline-dark md:text-accent;
    }
  }
}

@utility pulse {
  animation: pulse 2s infinite;
}

@utility animate-shrink-width {
  animation: shrink-width linear forwards;
}

@utility page-section {
  padding-top: 5rem;
  padding-bottom: 5rem;
  padding-left: 1rem;
  padding-right: 1rem;
}

@utility section-heading {
  font-size: 1.875rem;
  font-weight: 700;
  margin-bottom: 2rem;
  text-align: center;
}

@utility transition-duration-300 {
  transition-property: all;
  transition-duration: 300ms;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

@utility filter-purple {
  filter: brightness(40%) sepia(0.4) saturate(25) hue-rotate(238deg);
}

@utility text-hover-purple {
  transition: color 300ms ease;
  &:hover {
    color: theme(colors.violet.600);
  }
}

@utility border-hover-purple {
  &:hover {
    border-color: theme(colors.violet.600);
  }
}

@utility border-hover-fade-purple {
  border-bottom-width: 2px;
  border-color: transparent;
  &:hover {
    border-color: rgb(124 58 237 / 0.4);
  }
}

/* Base styles for light and dark mode */
html {
  color: theme(colors.gray.900); /* gray-900 */
  background-color: theme(colors.gray.200); /* gray-300 */
}

html.dark {
  color: theme(colors.gray.100); /* gray-100 */
  background-color: theme(colors.zinc.900); /* zinc-900 */
}

/* Fade in animation classes */
.fadeIn {
  opacity: 0;
  transition: all 1s;
}

.fadeIn.show {
  opacity: 1;
  transition: all 1s;
}

.blink {
  animation: blink 1.5s linear infinite;
}

/* Typography plugin configuration for prose-violet using @utility directive */
@utility prose-violet {
  --tw-prose-body: oklch(0.31 0.02 256);
  --tw-prose-headings: oklch(0.18 0.02 256);
  --tw-prose-lead: oklch(0.39 0.015 256);
  --tw-prose-links: theme(colors.violet.600);
  --tw-prose-bold: oklch(0.18 0.02 256);
  --tw-prose-counters: oklch(0.52 0.015 256);
  --tw-prose-bullets: oklch(0.69 0.009 256);
  --tw-prose-hr: oklch(0.87 0.013 256);
  --tw-prose-quotes: oklch(0.18 0.02 256);
  --tw-prose-quote-borders: oklch(0.87 0.013 256);
  --tw-prose-captions: oklch(0.39 0.015 256);
  --tw-prose-code: theme(colors.violet.600);
  --tw-prose-pre-code: oklch(0.93 0.008 256);
  --tw-prose-pre-bg: oklch(0.18 0.02 256);
  --tw-prose-th-borders: oklch(0.87 0.013 256);
  --tw-prose-td-borders: oklch(0.93 0.008 256);
  --tw-prose-invert-body: oklch(0.87 0.013 256);
  --tw-prose-invert-headings: white;
  --tw-prose-invert-lead: oklch(0.87 0.013 256);
  --tw-prose-invert-links: theme(colors.violet.500);
  --tw-prose-invert-bold: white;
  --tw-prose-invert-counters: oklch(0.69 0.009 256);
  --tw-prose-invert-bullets: oklch(0.52 0.015 256);
  --tw-prose-invert-hr: oklch(0.39 0.015 256);
  --tw-prose-invert-quotes: oklch(0.93 0.008 256);
  --tw-prose-invert-quote-borders: oklch(0.39 0.015 256);
  --tw-prose-invert-captions: oklch(0.69 0.009 256);
  --tw-prose-invert-code: theme(colors.violet.400);
  --tw-prose-invert-pre-code: oklch(0.87 0.013 256);
  --tw-prose-invert-pre-bg: rgb(0 0 0 / 50%);
  --tw-prose-invert-th-borders: oklch(0.52 0.015 256);
  --tw-prose-invert-td-borders: oklch(0.39 0.015 256);
}

.prose-violet a {
  @apply link-underline link-hover-slide dark:link-underline-dark text-accent hover:text-accent-hover md:text-content md:dark:text-neutral-primary;
  background: none;
}

.prose-violet a > span:first-child {
  background: linear-gradient(90deg, var(--color-brand-tertiary) 50%, theme(colors.violet.300) 50%) no-repeat 100% 100% / 200% 2px;
  transition: background-position .3s;
}

.prose-violet a:hover > span:first-child {
  background-position: 0% 100%;
}

.dark .prose-violet a > span:first-child {
  background-image: linear-gradient(90deg, var(--color-brand-tertiary) 50%, var(--color-brand-muted) 50%);
}

.prose code::before,
.prose code::after {
  content: "";
}

.prose code {
  background-color: theme(colors.neutral.200);
  color: var(--color-brand-tertiary);
  padding: 0.125rem 0.25rem;
  border-radius: 0.25rem;
  font-weight: 500;

  @variant dark {
    background-color: theme(colors.zinc.800);
  }
}

.prose pre code {
  background-color: transparent;
  padding: 0;
  color: inherit;
}